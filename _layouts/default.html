<!doctype html>

<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		{% seo %}

		<!-- ICONS -->
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<script src="https://unpkg.com/feather-icons"></script>
		<!-- GOOGLE FONT -->
		<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="{{ site.baseurl }}/css/screen.css">
		<link rel="icon" type="image/png" href="{{ site.baseurl }}/favicon.png">
		<link href="https://cdn.snipcart.com/themes/2.0/base/snipcart.min.css" type="text/css" rel="stylesheet">

		{% if jekyll.environment == 'production' and site.google_analytics_key != '' %}
			<script>
				window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
				ga('create', '{{ site.google_analytics_key }}', 'auto');
				ga('send', 'pageview');
			</script>
			<script async src='https://www.google-analytics.com/analytics.js'></script>
		{% endif %}

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
		{% if site.snipcart_key %}
			<script src="https://cdn.snipcart.com/scripts/2.0/snipcart.js" id="snipcart" data-api-key="{{ site.snipcart_key }}"></script>
		{% endif %}
	</head>
	<body>
		<header class="mainNavigation">
			<nav class="container">
				<input type="checkbox" name="" id="check">
				<a id="headerLogo" class="logo-container" href="{{ site.url }}">
					<!-- <h3 class="logo">Brand<span>Name</span></h3> -->
					{% include logo.html %}
				</a>
				{% include navigation.html %}
				<div class="hamburger-menu-container">
					<div class="hamburger-menu">
						<div></div>
					</div>
				</div>
			</nav>
		</header>
		<main class="content">
			<!-- If page is articles then show map else show normal hero -->
			{% if page.title == "Stories" %}
			<section class="hero map geoLocatedStories">
				{% google_map
					width="100%"
					height="100%"
					zoom="4"
					src="_posts/Transformation-Stories"
					styles="darkMinimum"
					no_cluster
					marker_icon="/images/interface/mapMarker.png" %}
			</section>
			{% else %}
		<section class="hero" style="background-image:url({{site.baseurl}}{{page.hero_image}}); background-position:{{page.customHeroPosition}};">
				<div class="overlay"></div>
				{% if page.heroQuote %}
				<blockquote class="heroQuote">
					<p>{{page.heroQuote}}</p>
					<footer><cite>- {{page.hero_Quote_Cite}}</cite></footer>
				</blockquote>
				{% else %}
				<div class="spacer"></div>
				{% endif %}
				<div class="heroTitle">
					<!-- If hero text exists then show it else show page title -->
					{% if page.hero %}
					<h1>{{page.hero}}</h1>
					{% else %}
					<h1>{{page.title}}</h1>
					{% endif %}
					<div class="breadcrumbs">{% include breadcrumbs.html %}</div>
				</div>
			</section>
			{% endif %}


			<!-- Main content -->
			{{ content }}
		</main>
		<!-- Footer -->
		<footer>
			{% include footer.html %}
		</footer>
		<!-- <script>
			document.getElementById("open-nav").onclick = function () {
				document.body.classList.toggle("nav-open");
				return false;
			};
		</script> -->
		<!-- ADDING GSAP -->
		<script src="{{ site.baseurl }}/js/gsap/gsap.min.js"></script>
		<script src="{{ site.baseurl }}/js/gsap/ScrollTrigger.min.js"></script>
		<script src="{{ site.baseurl }}/js/liteboxpro.min.js"></script>
		<!-- Animating the top nav height by changing logo height -->
		<script>
			window.onload = function() {
				var tl = gsap.timeline({
					id: "topNavShrink",
					defaults:{duration:1},
					scrollTrigger: {
						trigger: "body",
						start: 0,
						end: 130,
						toggleActions: "play complete reverse reverse",
						scrub: 1
					}
					});
					tl.to('#headerLogo .logo', {duration:1, height:55, ease:"linear"},'<');
					tl.to('.mainNavigation',{
						duration:1,
						boxShadow: "0 1px 15px rgba(0,0,0, .15)"
					},'<');
					return tl;
				}
		</script>
		<script>
			function animateSections() {
				// const sections = [];

				elements = gsap.utils.toArray('.sectionIntro');

				gsap.set(elements, {
				autoAlpha: 0,
				y: 30
				});

				elements.forEach( (el)=> {
				gsap.to(el, {
					duration: 0.3,
					autoAlpha: 1,
					y: 0,
					scrollTrigger: {
						trigger: el,
						start: "top 80%",
					}
					});
				})
			}
			animateSections();
		</script>

		<script>
			function animateCards() {
				const cards = document.querySelectorAll('.postPreview');

				cards.forEach(card => {
					// const letters = card.querySelectorAll('a span');
					const author = card.querySelector('.authorImage');
					const overlay = card.querySelector('.overlay');
					const button = card.querySelector('.button');
					// Timeline
					const tl = gsap.timeline({paused: true});
					tl.from(overlay, {duration:0.2, autoAlpha:0})
					tl.fromTo(author,
					{	autoAlpha: 0,
						x: -200,
						y: 200
					},
					{	autoAlpha: 1,
						transformOrigin: "50% 50%",
						duration:0.3,
						ease: Expo.easeOut,
						x: 0,
						y: 0
					},"<")
					tl.to(button, {duration:0.2, scale:1.2, transformOrigin:"100% 50%"},"<");
					// HOVER
					card.addEventListener("mouseenter", function(){
						tl.play();
					});
					card.addEventListener("mouseleave", function(){
						tl.reverse();
					});
				});
			}
			animateCards();
		</script>

		<script>
			feather.replace()
		</script>
		<script>
			new LiteBoxPro({
				theme_color: "white",
				line_width: 1,
				z_index: 2000,
				arrows: {
					default: {
						hide: true
					}
				},
				pager: {
					default: {
						hide: true
					}
				}
			});
		</script>
		<!-- Not yet using this - to be researched -->
		<!-- {% include lazyload.html %} -->
		<script src="{{ site.baseurl }}/js/application.js" type="text/javascript"></script>
	</body>
</html>